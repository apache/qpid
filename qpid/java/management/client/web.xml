<!--
 -
 - Licensed to the Apache Software Foundation (ASF) under one
 - or more contributor license agreements.  See the NOTICE file
 - distributed with this work for additional information
 - regarding copyright ownership.  The ASF licenses this file
 - to you under the Apache License, Version 2.0 (the
 - "License"); you may not use this file except in compliance
 - with the License.  You may obtain a copy of the License at
 - 
 -   http://www.apache.org/licenses/LICENSE-2.0
 - 
 - Unless required by applicable law or agreed to in writing,
 - software distributed under the License is distributed on an
 - "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 - KIND, either express or implied.  See the License for the
 - specific language governing permissions and limitations
 - under the License.
 -
 -->
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="qman" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
	<description>
		Q-Man is a Management bridge that exposes one (or several) Qpid
		broker domain model as MBeans that are accessible through the
		Java Management Extensions (JMX) and / or WS-DM.
	</description>
	<display-name>QManEE</display-name>
	 <context-param>
        <param-name>tapestry.app-package</param-name>
        <param-value>org.apache.qpid.management.web.console</param-value>
    </context-param>
 	<listener>
		<description>
			Provides lifecycle management for QMan module.
		</description>
		<display-name>QMan Lifecycle manager</display-name>
		<listener-class>org.apache.qpid.management.servlet.QManLifeCycleManager</listener-class>
	</listener>
	<servlet>
		<display-name>QMan Proxy Servlet</display-name>
		<servlet-name>Proxy</servlet-name>
		<servlet-class>org.apache.qpid.management.servlet.WSDMAdapter</servlet-class>
		<load-on-startup>2</load-on-startup>
	</servlet>
	<servlet>
		<description>
			Connects QMAn to one or more brokers depending from what is
			specified on the given (via system property) configuration
			file.
		</description>
		<display-name>Connect QMan to Broker</display-name>
		<servlet-name>ConnectQManToBroker</servlet-name>
		<servlet-class>org.apache.qpid.management.servlet.ConnectQManToBroker</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>
	<servlet-mapping>
		<servlet-name>ConnectQManToBroker</servlet-name>
		<url-pattern>/test/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Proxy</servlet-name>
		<url-pattern>/services/*</url-pattern>
	</servlet-mapping>
	<login-config>
		<auth-method>BASIC</auth-method>
	</login-config>
</web-app>