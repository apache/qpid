<?xml version="1.0"?>
<project name="Apache.Qpid.Common" default="test">

   <target name="build">
        <csc target="library" 
			define="${build.defines}" 
			warnaserror="true" debug="${build.debug}" 
         output="${build.dir}/${project::get-name()}.Tests.dll">
			
            <sources>
                <include name="**/*.cs" />
            </sources>
            <references>
               <include name="${build.dir}/log4net.dll" />
               <include name="${build.dir}/nunit.framework.dll" />
               <include name="${build.dir}/${project::get-name()}.dll" />
               <include name="${build.dir}/Apache.Qpid.Codec.dll" />
               <include name="${build.dir}/Apache.Qpid.Messaging.dll" />
               <include name="${build.dir}/Apache.Qpid.Buffer.dll" />
            </references>
            
        </csc>
    </target>
    <target name="test" depends="build">
         <nunit2>
            <formatter type="${nant.formatter}" usefile="false" />
            <test assemblyname="${build.dir}/${project::get-name()}.Tests.dll" />
         </nunit2>
    </target>
</project>

