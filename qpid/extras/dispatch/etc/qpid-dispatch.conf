##
## Licensed to the Apache Software Foundation (ASF) under one
## or more contributor license agreements.  See the NOTICE file
## distributed with this work for additional information
## regarding copyright ownership.  The ASF licenses this file
## to you under the Apache License, Version 2.0 (the
## "License"); you may not use this file except in compliance
## with the License.  You may obtain a copy of the License at
##
##   http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing,
## software distributed under the License is distributed on an
## "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
## KIND, either express or implied.  See the License for the
## specific language governing permissions and limitations
## under the License
##


##
## Container section - Configures the general operation of the AMQP container.
##
container {
    ##
    ## worker-threads - The number of threads that will be created to
    ## process message traffic and other application work (timers, non-amqp
    ## file descriptors, etc.)
    ##
    ## The number of threads should be related to the number of available
    ## processor cores.  To fully utilize a quad-core system, set the
    ## number of threads to 4.
    ##
    worker-threads: 4

    ##
    ## container-name - The name of the AMQP container.  If not specified,
    ## the container name will be set to a value of the container's
    ## choosing.  The automatically assigned container name is not
    ## guaranteed to be persistent across restarts of the container.
    ##
    container-name: Qpid.Dispatch.Router.A
}


##
## SSL Profile section - Zero or more SSL profiles may be defined here and
## then referenced later in listeners (for incoming connections) or
## connectors (for outgoing connectors).
##
ssl-profile {
    ##
    ## name - The name of the profile to be referenced later.
    ##
    name: ssl-profile-name

    ##
    ## cert-db - The path to the database that contains the public
    ## certificates of trusted certificate authorities (CAs).
    ##
    ## cert-db: /path/to/trusted-ca.db

    ##
    ## cert-file - The path to the file containing the PEM-formatted public
    ## certificate to be used on the local end of any connections using
    ## this profile.
    ##
    ## cert-file: /path/to/cert-file.pem

    ##
    ## key-file - The path to the file containing the PEM-formatted private
    ## key for the above certificate.
    ##
    ## key-file: /path/to/private-key-file.pem

    ##
    ## password-file - If the above private key is password protected, this
    ## is the path to a file containing the password that unlocks the
    ## certificate key.
    ##
    ## password-file: /path/to/password-file

    ##
    ## password - An alternative to storing the password in a file
    ## referenced by password-file is to supply the password right here in
    ## the configuration file.  This option can be used by supplying the
    ## password in the 'password' option.  Don't use both password and
    ## password-file in the same profile.
    ##
    ## password: <password>
}


##
## Listeners and Connectors
##
listener {
    addr: 0.0.0.0
    port: amqp
    sasl-mechanisms: ANONYMOUS
}

listener {
    label: Router Interconnect Access
    role: inter-router
    addr: 0.0.0.0
    port: 5671
    sasl-mechanisms: EXTERNAL
    ssl-profile: ssl-profile-name
    require-peer-auth: yes
    allow-unsecured: yes
}

connector {
    label: Router Uplink
    role: inter-router
    addr: backbone.enterprise.com
    port: amqps
    sasl-mechanisms: EXTERNAL
    ssl-profile: ssl-profile-name
    allow-redirect: no
}


##
## Router section - Configure the AMQP router function.
##
router {
    ##
    ## Router Mode:
    ##
    ## standalone - Standalone router.  In standalone mode, the router operates as
    ##              a single component.  It does not participate in the routing protocol
    ##              and therefore will not coorperate with other routers.
    ## interior   - Interior router.  The router operates in cooreration with other
    ##              interior routers in an interconnected network.
    ## edge       - Edge router.  The router operates with an uplink into an interior
    ##              router network. Edge routers are typically used as connection concentrators
    ##              or as security firewalls for access into the interior network.
    ##
    mode: standalone

    ##
    ## For Interior router mode only.
    ##
    ## area and router-id - Each router is assigned an area name and a
    ## router-id that is unique within the area.
    ##
    area: all
    router-id: Router.A
}


